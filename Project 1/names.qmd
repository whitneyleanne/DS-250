---
title: "Client Report - What's In a Name"
subtitle: "Course DS 250"
author: "Whitney Hansen"
format:
  html:
    self-contained: true
    page-layout: full
    title-block-banner: true
    toc: true
    toc-depth: 3
    toc-location: body
    number-sections: false
    html-math-method: katex
    code-fold: true
    code-summary: "Show the code"
    code-overflow: wrap
    code-copy: hover
    code-tools:
        source: false
        toggle: true
        caption: See code
execute: 
  warning: false
    
---

```{python}
#| label: libraries
#| include: false
import pandas as pd
import numpy as np
import altair as alt
```


## Elevator pitch
_In this project, I explore some of the dynamics of name popularity over time using a comprehensive dataset. By looking at historical trends, we can find some of the influences that drive naming patterns. For instance, my name, Whitney, saw its peak in the mid-1980s and has since declined, which shows the popularity of the name has since gone down. Through visualizations, I also examined the age demographics of names like Brittany, predict their likely age ranges, and delve into the rise and fall of classic biblical names such as Mary, Martha, Peter, and Paul from 1920 to 2000. I also analyzed the impact of popular culture on naming trends, using the name Leia from Star Wars as a case study to see how movie releases influenced its usage. This project highlights how names can tell stories about trends and individual identities._

```{python}

url = "https://raw.githubusercontent.com/byuidatascience/data4names/master/data-raw/names_year/names_year.csv" 
names = pd.read_csv(url)
```

## QUESTION|TASK 1

__How does your name at your birth year compare to its use historically?__

_In the dataset, there are a little more than 1500 instances of the name Whitney in the year 1998, when I was born. My birth year has a lower use rate than its peak, which was in the mid 1980's. In 1998, 'Whitney' was a name on the decline._

```{python}
#| label: How does your name at your birth year compare to its use historically?
name_data = names[names['name'] == 'Whitney']

if not name_data.empty:
    line = alt.Chart(name_data).mark_line().encode(
        x=alt.X('year:O', axis=alt.Axis(format=''), title='Year'), 
        y=alt.Y('Total:Q', title='Number of Occurrences'),
    )

    # Point for the year 1998
    point = alt.Chart(name_data[name_data['year'] == 1998]).mark_point(color='red').encode(
        x=alt.X('year:O', axis=alt.Axis(format='')),
        y=alt.Y('Total:Q'),
        tooltip=['year', 'Total'] 
    )

    # Rule for the year 1998
    rule = alt.Chart(pd.DataFrame({'year': [1998]})).mark_rule(color='red', strokeDash=[5,5]).encode(
        x='year:O',
    )

    # Combining the charts!
    chart = (line + point + rule).properties(
        title='Historical Usage of the Name "Whitney"'
    )

    chart.display()

```



## QUESTION|TASK 2

__If you talked to someone named Brittany on the phone, what is your guess of his or her age? What ages would you not guess?__

_If I talked to someone on the phone named 'Brittany', I would assume they were between 28 and 38 years old, based on this data. I wouldn't think they were older than 44 or younger than 23 years old._

```{python}
# label: Q2: If you talked to someone named Brittany on the phone, what is your guess of his or her age? What ages would you not guess?

# Filtered for the name "Brittany"
brittany_data = names[names['name'] == 'Brittany']

if not brittany_data.empty:
    chart = alt.Chart(brittany_data).mark_line(point=True).encode(
        x=alt.X('year:O', title='Year', axis=alt.Axis(format='', labelAngle=-45)), 
        y=alt.Y('Total:Q', title='Number of Occurrences'),
        tooltip=['year', 'Total']  
    ).properties(
        title='Popularity of the Name "Brittany" Over Time'
    )

    chart.display()


```

_include figures in chunks and discuss your findings in the figure._

## QUESTION|TASK 3

__Mary, Martha, Peter, and Paul are all Christian names. From 1920 - 2000, compare the name usage of each of the four names. What trends do you notice?__

_For the name 'Mary', there is a significant increase in usage for the name between 1945 and 1955. THe name steadily declines from there, evening out around the mid 70's._
_For the name Martha, it was used quite a bit in the 1920's and 30's, reaching a peak in the mid-40's. After that, there was a steady decline, which began evening out in the early 70's._
_Peter is the most "up and down" of the group, with ups and downs in a very zigzag-like shape. The peak is around 1956, though the steady decline does not begin until the late 60's._
_Paul has a similar trend, peaking in the mid-50's and then steadily declining._
_What I gathered from looking at all of these charts and analyzing the trends is that biblical names were on the rise in the 20's, peaked in the 50's, and declined pretty rapidly afterwards._

```{python}
# label: Q3: Mary, Martha, Peter, and Paul are all Christian names. From 1920 - 2000, compare the name usage of each of the four names. What trends do you notice?

def create_name_trend_chart(names, name, start_year, end_year):
    name_data = names[(names['name'] == name) & (names['year'] >= start_year) & (names['year'] <= end_year)]
    
    if not name_data.empty:
        chart = alt.Chart(name_data).mark_line(point=True).encode(
            x=alt.X('year:O', title='Year', axis=alt.Axis(format='', labelAngle=-45)), 
            y=alt.Y('Total:Q', title='Number of Occurrences'),
            tooltip=['year', 'Total']
        ).properties(
            title=f'Popularity of the Name "{name}" from {start_year} to {end_year}'
        )
        return chart
# This creates a line chart for the historical usage of the names.THe names that are used: 
names_to_analyze = ['Mary', 'Martha', 'Peter', 'Paul']

for name in names_to_analyze:
    chart = create_name_trend_chart(names, name, 1920, 2000)
    chart.display()


```

## QUESTION|TASK 4

__Think of a unique name from a famous movie. Plot the usage of that name and see how changes line up with the movie release. Does it look like the movie had an effect on usage?__

_I added three red dotted lines to show release dates. 1977 for the first Star Wars movie that released, 1999 for the first prequel Star Wars movie that released, and 2005 for the third prequel Star Wars movie that was released._
_What I gathered from this is that the name Leia did have growth trends after each Star Wars movie was released. It is a pretty unique name, and Leia is a cool character so it is understandable that parents would name their daughters that._

```{python}
# label: Q4: Think of a unique name from a famous movie. Plot the usage of that name and see how changes line up with the movie release. Does it look like the movie had an effect on usage?

leia_data = names[names['name'] == 'Leia']

if not leia_data.empty:
    leia_chart = alt.Chart(leia_data).mark_line(point=True).encode(
        x=alt.X('year:O', title='Year', axis=alt.Axis(format='', labelAngle=-45)), 
        y=alt.Y('Total:Q', title='Number of Occurrences'),
        tooltip=['year', 'Total'] 
    ).properties(
        title='Popularity of the Name "Leia" Over Time'
    )

    # I used a function to create a rule for a given year
    def create_rule(year):
        return alt.Chart(pd.DataFrame({'year': [year]})).mark_rule(color='red', strokeDash=[5, 5]).encode(
            x='year:O',
        )

    # Combined the line chart with rules for three of the years that different Star Wars movies released
    combined_chart = leia_chart + create_rule(1977) + create_rule(1999) + create_rule(2005)
    combined_chart.display()
else:
    print("No data found for the name 'Leia'.")


```

```{python}
# Label: Q3: Mary, Martha, Peter, and Paul are all Christian names. From 1920 - 2000, compare the name usage of each of the four names. What trends do you notice?

# Filter data for the selected names within the specified years
filtered_names = names[(names['name'].isin(['Mary', 'Martha', 'Peter', 'Paul'])) & 
                       (names['year'] >= 1920) & (names['year'] <= 2000)]

# Create a line chart for the historical usage of the names
combined_chart = alt.Chart(filtered_names).mark_line(point=True).encode(
    x=alt.X('year:O', title='Year', axis=alt.Axis(format='', labelAngle=-45)), 
    y=alt.Y('Total:Q', title='Number of Occurrences'),
    color='name:N',
    tooltip=['year', 'Total', 'name']
).properties(
    title='Popularity of the Names Mary, Martha, Peter, and Paul from 1920 to 2000'
)

combined_chart.display()

```